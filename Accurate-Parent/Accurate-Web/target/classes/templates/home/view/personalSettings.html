<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">
    <title>个人设置</title>
    <link href="/assets/css/TenG5.css" rel="stylesheet"/>
    <link href="/assets/jquery-weui-build/lib/weui.min.css" rel="stylesheet"/>
    <link href="/assets/jquery-weui-build/css/jquery-weui.min.css" rel="stylesheet"/>
    <link href="/assets/jquery-weui-build/demos/css/demos.css" rel="stylesheet"/>
    <link href="/assets/mdui-v0.4.2/css/mdui.min.css" rel="stylesheet"/>
    <script src="/assets/jquery-1.9.1.min.js"></script>
    <script src="/assets/mdui-v0.4.2/js/mdui.min.js"></script>
    <script src="/assets/jquery-weui-build/js/jquery-weui.min.js"></script>
    <script src="/assets/jquery-weui-build/js/swiper.min.js"></script>
    <script src="/assets/jquery-weui-build/js/city-picker.min.js"></script>
</head>
<div id="aabb" class="weui-popup__container">
    <div class="weui-popup__overlay"></div>
    <div class="weui-popup__modal ">
        <!-- //文本框 -->
        <div class="weui-cells">
            <div class="weui-cell">
                <div class="weui-cell__bd">
                    <input class="weui-input" id="newUsername" type="text" th:value="${user.username}">
                </div>
            </div>
        </div>
        <div style="width: 99%; height: 20px; text-align: center;padding-top: 20px;padding-bottom: 20px;">
            <a href="javascript: void(0)" id="updateUsername" class="weui-btn weui-btn_primary weui-btn_mini">保存</a>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <a href="javascript:void(0)" onclick="(history.back(-1))" class="weui-btn weui-btn_primary weui-btn_mini">返回</a>
        </div>
    </div>
</div>

<body ontouchstart style="background-color:#F7F7F7 !important;">
<!-- <header class="demos-header">
    <h1 class="demos-title ">检查单</h1>
    <p class="demos-sub-title">好看的皮囊千篇一律，有趣的灵魂万里挑一</p>
</header> -->
<div class="weui-cells divOne">
    <a class="weui-cell weui-cell_access" href="javascript:;">
        <div class="weui-cell__hd">头像</div>
        <div class="weui-cell__bd">
            <p></p>
        </div>
        <div class="weui-cell__ft">
            <img th:src="${user.headImgUrl != null} ? ${user.headImgUrl} : '/assets/images/头像.jpg'" src="/assets/images/头像.jpg"
                 style="width: 50px; height: 50px;">
        </div>
    </a>
    <a class="weui-cell weui-cell_access open-popup" data-target="#aabb" href="javascript:;">
        <div class="weui-cell__hd">姓名</div>
        <div class="weui-cell__bd">
            <p></p>
        </div>
        <div class="weui-cell__ft">
            <p th:text="${user.username}">- TenG先森</p>
        </div>
    </a>
    <a class="weui-cell weui-cell_access" href="javascript:;">
        <div class="weui-cell__hd">住院号</div>
        <div class="weui-cell__bd">
            <p></p>
        </div>
        <div class="weui-cell__ft">
            <p th:text="${user.hospitalizationNumber != null} ? ${user.hospitalizationNumber} : '暂无'">2_189_457154</p>
        </div>
    </a>
    <a class="weui-cell weui-cell_access" href="javascript:;">
        <div class="weui-cell__hd">身份证号</div>
        <div class="weui-cell__bd">
            <p></p>
        </div>
        <div class="weui-cell__ft">
            <p th:text="${user.idCard}">2_189_457154</p>
        </div>
    </a>
    <a class="weui-cell weui-cell_access" href="javascript:;">
        <div class="weui-cell__hd">性别</div>
        <div class="weui-cell__bd">
            <p></p>
        </div>
        <div class="weui-cell__ft">
            <th:block th:if="${user != null}">
                <p th:if="${user.gender == '男'}">♂</p>
                <p th:if="${user.gender == '女'}">♀</p>
            </th:block>
            <th:block th:if="${user == null}">
                <p th:text="保密">♂</p>
            </th:block>
        </div>
    </a>
    <!--<a class="weui-cell weui-cell_access" href="javascript:;">-->
        <!--<div class="weui-cell__hd">更多</div>-->
        <!--<div class="weui-cell__bd">-->
            <!--<p></p>-->
        <!--</div>-->
        <!--<div class="weui-cell__ft">-->
            <!--<p></p>-->
        <!--</div>-->
    <!--</a>-->
</div>
<!--<div class="weui-cells">-->
    <!--<a class="weui-cell weui-cell_access" href="javascript:;">-->
        <!--<div class="weui-cell__hd">我的关注</div>-->
        <!--<div class="weui-cell__bd">-->
            <!--<p></p>-->
        <!--</div>-->
        <!--<div class="weui-cell__ft">-->
            <!--<p></p>-->
        <!--</div>-->
    <!--</a>-->
    <!--<a class="weui-cell weui-cell_access" href="javascript:;">-->
        <!--<div class="weui-cell__hd">我的二维码</div>-->
        <!--<div class="weui-cell__bd">-->
            <!--<p></p>-->
        <!--</div>-->
        <!--<div class="weui-cell__ft">-->
            <!--<img src="/assets/images/二维码.png" style="width: 30px; height: 30px;">-->
        <!--</div>-->
    <!--</a>-->
<!--</div>-->
<div style="height: 50px; width: 100%;"></div>
<a href="/personalCenterThree" class="weui-btn weui-btn_primary">返回</a>
</body>
<script th:inline="javascript">
    $('#updateUsername').click(function () {
        let username = $('#newUsername').val();
        if (username != [[${user.username}]]) {
            $.ajax({
                url: '/updateUsername',
                type: 'post',
                data: {userId: [[${user.id}]], username: username},
                dataType: 'json',
                success: function (result) {
                    if (result.code == 1) {
                        $.toast(result.msg, function () {
                            window.location.reload()
                        });
                    }
                }
            })
        }
    })
</script>
</html>
